# üìö API Documentation

## üì° –°–ø–∏—Å–æ–∫ –≠–Ω–¥–ø–æ–∏–Ω—Ç–æ–≤ (API Endpoints)

### üîê –ê—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏—è / Auth
**–ë–∞–∑–æ–≤—ã–π –ø—É—Ç—å:** `http://localhost:5000/auth`

| –ú–µ—Ç–æ–¥ | –≠–Ω–¥–ø–æ–∏–Ω—Ç | –û–ø–∏—Å–∞–Ω–∏–µ | –í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (Body) |
| :--- | :--- | :--- | :--- |
| `POST` | `/register` | –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è | `{ "username": "alex", "password": "123", "role": "student", "allergies": "Nuts" }` |
| `POST` | `/login` | –í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É (–ø–æ–ª—É—á–µ–Ω–∏–µ —Ç–æ–∫–µ–Ω–∞) | `{ "username": "alex", "password": "123" }` |

---

### üéì –°—Ç—É–¥–µ–Ω—Ç / Student
**–ë–∞–∑–æ–≤—ã–π –ø—É—Ç—å:** `http://localhost:5000/student`  
*–¢—Ä–µ–±—É–µ—Ç—Å—è –∑–∞–≥–æ–ª–æ–≤–æ–∫:* `Authorization: Bearer <–≤–∞—à_—Ç–æ–∫–µ–Ω>`

| –ú–µ—Ç–æ–¥ | –≠–Ω–¥–ø–æ–∏–Ω—Ç | –û–ø–∏—Å–∞–Ω–∏–µ | –í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (Body / Params) |
| :--- | :--- | :--- | :--- |
| `GET` | `/menu` | –ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –¥–æ—Å—Ç—É–ø–Ω—ã—Ö –±–ª—é–¥ | ‚Äî |
| `GET` | `/profile` | –ü–æ–ª—É—á–∏—Ç—å —Å–≤–æ–π –ø—Ä–æ—Ñ–∏–ª—å (–±–∞–ª–∞–Ω—Å, –∞–ª–ª–µ—Ä–≥–∏–∏) | ‚Äî |
| `POST` | `/balance` | **–ü–æ–ø–æ–ª–Ω–∏—Ç—å –±–∞–ª–∞–Ω—Å** | `{ "amount": 500 }` |
| `PATCH`| `/profile` | **–û–±–Ω–æ–≤–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± –∞–ª–ª–µ—Ä–≥–∏–∏** | `{ "allergies": "Gluten, Lactose" }` |
| `POST` | `/buy` | –ö—É–ø–∏—Ç—å –µ–¥—É (—Ä–∞–∑–æ–≤–æ –∏–ª–∏ –∞–±–æ–Ω–µ–º–µ–Ω—Ç) | `{ "menu_item_id": 1, "type": "single" }` |
| `POST` | `/redeem/:orderId` | –ü–æ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å –ø–æ–ª—É—á–µ–Ω–∏–µ –µ–¥—ã (–ø–æ–∫–∞–∑–∞—Ç—å –ø–æ–≤–∞—Ä—É) | **URL Param:** `orderId` (ID –∑–∞–∫–∞–∑–∞) |
| `POST` | `/reviews` | –û—Å—Ç–∞–≤–∏—Ç—å –æ—Ç–∑—ã–≤ –æ –±–ª—é–¥–µ | `{ "menu_item_id": 1, "rating": 5, "comment": "Nice!" }` |
| `GET` | `/reviews/:menuId` | –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –æ—Ç–∑—ã–≤—ã –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –±–ª—é–¥–∞ | **URL Param:** `menuId` (ID –±–ª—é–¥–∞) |

---

### üë®‚Äçüç≥ –ü–æ–≤–∞—Ä / Cook
**–ë–∞–∑–æ–≤—ã–π –ø—É—Ç—å:** `http://localhost:5000/cook`  
*–¢—Ä–µ–±—É–µ—Ç—Å—è —Ä–æ–ª—å `cook` (–¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è –º–µ–Ω—é —Ç–∞–∫–∂–µ —Ä–∞–±–æ—Ç–∞–µ—Ç `admin`)*

| –ú–µ—Ç–æ–¥ | –≠–Ω–¥–ø–æ–∏–Ω—Ç | –û–ø–∏—Å–∞–Ω–∏–µ | –í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (Body) |
| :--- | :--- | :--- | :--- |
| `POST` | `/menu` | –î–æ–±–∞–≤–∏—Ç—å –Ω–æ–≤–æ–µ –±–ª—é–¥–æ –≤ –º–µ–Ω—é | `{ "name": "Pasta", "description": "Italian", "price": 200, "type": "lunch", "available_qty": 50 }` |
| `POST` | `/request` | –û—Ç–ø—Ä–∞–≤–∏—Ç—å –∑–∞—è–≤–∫—É –Ω–∞ –∑–∞–∫—É–ø–∫—É –ø—Ä–æ–¥—É–∫—Ç–æ–≤ | `{ "item_name": "Tomatoes", "quantity": 20 }` |
| `GET` | `/served` | –û—Ç—á–µ—Ç: —Å–ø–∏—Å–æ–∫ –≤—ã–¥–∞–Ω–Ω—ã—Ö –±–ª—é–¥ | ‚Äî |

---

### üõ† –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä / Admin
**–ë–∞–∑–æ–≤—ã–π –ø—É—Ç—å:** `http://localhost:5000/admin`  
*–¢—Ä–µ–±—É–µ—Ç—Å—è —Ä–æ–ª—å `admin`*

| –ú–µ—Ç–æ–¥ | –≠–Ω–¥–ø–æ–∏–Ω—Ç | –û–ø–∏—Å–∞–Ω–∏–µ | –í—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ (Params) |
| :--- | :--- | :--- | :--- |
| `GET` | `/stats` | –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ (–≤—Å–µ–≥–æ –ø—Ä–æ–¥–∞–∂, —Å—É–º–º–∞) | ‚Äî |
| `GET` | `/dishes-report` | **–î–µ—Ç–∞–ª—å–Ω—ã–π –æ—Ç—á–µ—Ç –ø–æ –±–ª—é–¥–∞–º** (–ø—Ä–æ–¥–∞–∂–∏ –ø–æ –ø–æ–∑–∏—Ü–∏—è–º) | ‚Äî |
| `GET` | `/requests` | –ü—Ä–æ—Å–º–æ—Ç—Ä –∞–∫—Ç–∏–≤–Ω—ã—Ö –∑–∞—è–≤–æ–∫ –Ω–∞ –ø—Ä–æ–¥—É–∫—Ç—ã | ‚Äî |
| `PUT` | `/requests/:id/approve` | –û–¥–æ–±—Ä–∏—Ç—å –∑–∞—è–≤–∫—É –Ω–∞ –∑–∞–∫—É–ø–∫—É | **URL Param:** `id` (ID –∑–∞—è–≤–∫–∏) |

<br>

## üóÑ –°—Ö–µ–º–∞ –ë–∞–∑—ã –î–∞–Ω–Ω—ã—Ö (SQLite)

### 1. –¢–∞–±–ª–∏—Ü–∞ `users` (–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏)
| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
| :--- | :--- | :--- |
| `id` | INTEGER (PK) | –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID |
| `username` | TEXT | –õ–æ–≥–∏–Ω (—É–Ω–∏–∫–∞–ª—å–Ω—ã–π) |
| `password` | TEXT | –•—ç—à –ø–∞—Ä–æ–ª—è |
| `role` | TEXT | –†–æ–ª—å: `student`, `cook`, `admin` |
| `allergies` | TEXT | –ê–ª–ª–µ—Ä–≥–∏–∏ (–¥–ª—è —Å—Ç—É–¥–µ–Ω—Ç–æ–≤) |
| `balance` | REAL | –ë–∞–ª–∞–Ω—Å (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é 0) |

### 2. –¢–∞–±–ª–∏—Ü–∞ `menu` (–ú–µ–Ω—é)
| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
| :--- | :--- | :--- |
| `id` | INTEGER (PK) | ID –±–ª—é–¥–∞ |
| `name` | TEXT | –ù–∞–∑–≤–∞–Ω–∏–µ |
| `description` | TEXT | –û–ø–∏—Å–∞–Ω–∏–µ |
| `price` | REAL | –¶–µ–Ω–∞ |
| `type` | TEXT | –¢–∏–ø (–æ–±–µ–¥, –∑–∞–≤—Ç—Ä–∞–∫) |
| `available_qty` | INTEGER | –û—Å—Ç–∞—Ç–æ–∫ –ø–æ—Ä—Ü–∏–π |

### 3. –¢–∞–±–ª–∏—Ü–∞ `orders` (–ó–∞–∫–∞–∑—ã)
| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
| :--- | :--- | :--- |
| `id` | INTEGER (PK) | ID –∑–∞–∫–∞–∑–∞ |
| `user_id` | INTEGER (FK) | ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |
| `menu_item_id` | INTEGER (FK) | ID –±–ª—é–¥–∞ |
| `type` | TEXT | –¢–∏–ø (`single`, `subscription`) |
| `status` | TEXT | –°—Ç–∞—Ç—É—Å (`paid`, `received`) |
| `date` | TEXT | –î–∞—Ç–∞ –ø–æ–∫—É–ø–∫–∏ |

### 4. –¢–∞–±–ª–∏—Ü–∞ `procurement_requests` (–ó–∞–∫—É–ø–∫–∏)
| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
| :--- | :--- | :--- |
| `id` | INTEGER (PK) | ID –∑–∞—è–≤–∫–∏ |
| `cook_id` | INTEGER (FK) | ID –ø–æ–≤–∞—Ä–∞ |
| `item_name` | TEXT | –ü—Ä–æ–¥—É–∫—Ç |
| `quantity` | INTEGER | –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ |
| `status` | TEXT | –°—Ç–∞—Ç—É—Å (`pending`, `approved`) |

### 5. –¢–∞–±–ª–∏—Ü–∞ `reviews` (–û—Ç–∑—ã–≤—ã)
| –ü–æ–ª–µ | –¢–∏–ø | –û–ø–∏—Å–∞–Ω–∏–µ |
| :--- | :--- | :--- |
| `id` | INTEGER (PK) | ID –æ—Ç–∑—ã–≤–∞ |
| `user_id` | INTEGER (FK) | ID —Å—Ç—É–¥–µ–Ω—Ç–∞ |
| `menu_item_id` | INTEGER (FK) | ID –±–ª—é–¥–∞ |
| `rating` | INTEGER | –û—Ü–µ–Ω–∫–∞ (1-5) |
| `comment` | TEXT | –¢–µ–∫—Å—Ç |
| `date` | TEXT | –î–∞—Ç–∞ |


